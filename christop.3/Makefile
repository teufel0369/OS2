CC=gcc
CFLAGS = -g -Wall

CHILD_SOURCE=child.c
CHILD_OBJECTS=$(CHILD_SOURCE:.c=.o)
CHILD_EXECUTABLE=child

MASTER_SOURCE=master.c
MASTER_OBJECTS=$(MASTER_SOURCE:.c=.o)
MASTER_EXECUTABLE=oss

HEADER=shared.h

all: $(CHILD_EXECUTABLE) $(MASTER_EXECUTABLE)

$(CHILD_EXECUTABLE): $(CHILD_OBJECTS)
	$(CC) $(CHILD_OBJECTS) -o $(CHILD_EXECUTABLE)

$(MASTER_EXECUTABLE): $(MASTER_OBJECTS)
	$(CC) $(MASTER_OBJECTS) -o $(MASTER_EXECUTABLE)

%.o: %.c $(HEADER)
	$(CC) -c $(CFLAGS) $*.c -o $*.o

.PHONY: clean

clean:
	rm *.o *.out $(CHILD_EXECUTABLE) $(MASTER_EXECUTABLE)
